name: Getan and Init github respository
on:
  workflow_dispatch:
    inputs:
      url:
        description: respository url
        type: string
        required: true
      dependenth:
        description: dependenth
        type: string
        required: false

jobs:
  start:
    name: start
    runs-on: ubuntu-latest
    steps:
      - name: clone and cd
        run: |
          git clone ${{ inputs.url }}
          if (( $? != 0 ));then echo clone failed&&exit 1; fi
          echo clone OK!
      - name: init env
        run: |
          sudo apt update
          ${{ inputs.dependenth }}
      - name: init sub module 
        run: |
          cd "`ls`"
          git submodule update --init || echo no submodule
          git submodule update --remote || echo no remote submodule
          ./bootstrap || echo no bootstrap
          ./bootstrap || echo no bootstrap
          export INSTALL_PREFIX=$PWD/install
          mkdir -p build && cd build || echo cd build
          ../configure --prefix=$INSTALL_PREFIX || cd .. && echo no configure
          make && make install || echo no make
          echo complate repo OK!
      - name: upload
        uses: actions/upload-artifact@v4
        with:
          name: repo
          path: ./
       
                  
          
    
